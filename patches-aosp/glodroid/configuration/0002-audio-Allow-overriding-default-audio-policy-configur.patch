From e25ed554fcbfc4294cac01972b8d192c725a4ecb Mon Sep 17 00:00:00 2001
From: Roman Stratiienko <r.stratiienko@gmail.com>
Date: Sat, 22 Apr 2023 14:48:53 +0300
Subject: [PATCH 2/3] audio: Allow overriding default audio policy
 configuration file

Signed-off-by: Roman Stratiienko <r.stratiienko@gmail.com>
---
 common/audio/device.mk | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/common/audio/device.mk b/common/audio/device.mk
index bd1e7f2..7d1b194 100644
--- a/common/audio/device.mk
+++ b/common/audio/device.mk
@@ -13,8 +13,10 @@ PRODUCT_PACKAGES += \
     audio.r_submix.default \
     tinyalsa tinymix tinycap tinypcminfo tinyplay \
 
+GD_AUDIOPOLICY_FILE ?= $(LOCAL_PATH)/audio_policy_configuration.xml
+
 PRODUCT_COPY_FILES += \
-    glodroid/configuration/common/audio/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
+    $(GD_AUDIOPOLICY_FILE):$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
     frameworks/av/services/audiopolicy/config/a2dp_audio_policy_configuration_7_0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/a2dp_audio_policy_configuration_7_0.xml \
     frameworks/av/services/audiopolicy/config/a2dp_in_audio_policy_configuration_7_0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/a2dp_in_audio_policy_configuration_7_0.xml \
     frameworks/av/services/audiopolicy/config/bluetooth_audio_policy_configuration_7_0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/bluetooth_audio_policy_configuration_7_0.xml \
-- 
2.37.2

